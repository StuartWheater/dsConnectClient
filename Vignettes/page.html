<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Patricia Ryser-Welch on Behalf of the DataSHIELD Team" />

<meta name="date" content="2021-02-05" />

<title>ds.client.connection.server Packages users documentation</title>

<style type="text/css">
a.anchor-section {margin-left: 10px; visibility: hidden; color: inherit;}
a.anchor-section::before {content: '#';}
.hasAnchor:hover a.anchor-section {visibility: visible;}
</style>
<script>// Anchor sections v1.0 written by Atsushi Yasumoto on Oct 3rd, 2020.
document.addEventListener('DOMContentLoaded', function() {
  // Do nothing if AnchorJS is used
  if (typeof window.anchors === 'object' && anchors.hasOwnProperty('hasAnchorJSLink')) {
    return;
  }

  const h = document.querySelectorAll('h1, h2, h3, h4, h5, h6');

  // Do nothing if sections are already anchored
  if (Array.from(h).some(x => x.classList.contains('hasAnchor'))) {
    return null;
  }

  // Use section id when pandoc runs with --section-divs
  const section_id = function(x) {
    return ((x.classList.contains('section') || (x.tagName === 'SECTION'))
            ? x.id : '');
  };

  // Add anchors
  h.forEach(function(x) {
    const id = x.id || section_id(x.parentElement);
    if (id === '') {
      return null;
    }
    let anchor = document.createElement('a');
    anchor.href = '#' + id;
    anchor.classList = ['anchor-section'];
    x.classList.add('hasAnchor');
    x.appendChild(anchor);
  });
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">ds.client.connection.server Packages users documentation</h1>
<h4 class="author">Patricia Ryser-Welch on Behalf of the DataSHIELD Team</h4>
<h4 class="date">2021-02-05</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The purpose of this package is to support DataSHIELD analysts and programmers to connect to some Opal servers in a more supportive manner. The package offers some functions that can simplify certain operations within DataSHIELD client scripts and functions.</p>
<p>The latter includes:</p>
<ol start="0" style="list-style-type: decimal">
<li>Prerequisites</li>
<li>Building some login data frames</li>
<li>Logging in and out of some DataSHIELD servers</li>
<li>Assigning values to some server variables</li>
<li>Executing some aggregates server-side functions</li>
<li>Deleting some server-side variables</li>
<li>Checking some server-side variables exists</li>
</ol>
<p>This package has been written to be used along the side of the <a href="https://github.com/datashield/dsBaseClient">dsBaseClient package</a>.</p>
<p>We would recommend any new DataSHIELD users to install DataSHIELD and complete the training available on the DataSHIELD wiki; <a href="https://data2knowledge.atlassian.net/wiki/spaces/DSDEV/pages/12943395/Installation+Training">Installation and training</a>.</p>
</div>
<div id="installing-client-side-and-server-side-packages" class="section level1">
<h1>Installing client-side and server-side packages</h1>
<div id="server-side-datashield-server" class="section level2">
<h2>Server-side DataSHIELD server</h2>
<p>In order to use all the functions of this package, any DataSHIELD servers need to have installed the following server-side packages:</p>
<ul>
<li><a href="https://github.com/patRyserWelch8/dsServerParameter">dsParameterServer</a></li>
<li><a href="https://github.com/datashield/dsBase">dsBase</a></li>
<li>The following servers functions are called and made available in version 6.2 of dsBase [ADD LINK]:
<ul>
<li>existsDS</li>
<li>removeDS</li>
</ul></li>
</ul>
<p>The instructions to install the server-side packages can be found in DataSHIELD <a href="https://data2knowledge.atlassian.net/wiki/spaces/DSDEV/pages/12943483/How+to+upload+a+server-side+function">Wiki</a>.</p>
</div>
<div id="client-side-analysis-computer" class="section level2">
<h2>Client-side analysis computer</h2>
<p>During the installation, this package will import the following packages:</p>
<ul>
<li>DSI</li>
<li>DSOpal</li>
<li>RCurl</li>
<li>httr</li>
<li>R6</li>
<li>opalr</li>
</ul>
<p>These packages are required in the client-side to connect to an Opal Server, to manipulate some server-side variables and call server-side functions.</p>
</div>
<div id="client-side-analysis-scripts" class="section level2">
<h2>Client-side analysis scripts</h2>
<p>At the start of each DataSHIELD client-side script, DataSHIELD analysts need to load and attach these packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#Libraries </span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(DSI)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(DSOpal)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(httr)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(dsConnectClient)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">library</span>(dsBaseClient)</a></code></pre></div>
</div>
</div>
<div id="building-a-login-data-frame" class="section level1">
<h1>Building a login data frame</h1>
<p>A login data frame provides the information to connect to any DataSHIELD servers; those servers have an Opal Data Warehouse software installed. On the client-side, the following information needs to be provided to log in.</p>
<p><em>data computers name</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">server.names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Newcastle&quot;</span>, <span class="st">&quot;New York&quot;</span>)</a></code></pre></div>
<p><em>data computers url</em></p>
<p>These unique resources link are likely to be unique. In this example, we are connecting to a virtual machine and hence using a different.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">url_Paris     &lt;-<span class="st"> &#39;https://192.168.56.100:8443&#39;</span></a>
<a class="sourceLine" id="cb3-2" title="2">url_Newcastle &lt;-<span class="st"> &#39;https://192.168.56.100:8443&#39;</span></a>
<a class="sourceLine" id="cb3-3" title="3">url_NewYork   &lt;-<span class="st"> &#39;https://192.168.56.100:8443&#39;</span></a>
<a class="sourceLine" id="cb3-4" title="4">server.urls     &lt;-<span class="st"> </span><span class="kw">c</span>(url_Paris,url_Newcastle,url_NewYork)</a></code></pre></div>
<p><em>data computers table name</em></p>
<p>The name of these tables should exist on each server. In the example below the table “TESTING.DATASET1” is assumed to be stored in Paris.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">table_Paris     &lt;-<span class="st"> &quot;TESTING.DATASET1&quot;</span></a>
<a class="sourceLine" id="cb4-2" title="2">table_Newcastle &lt;-<span class="st"> &quot;TESTING.DATASET2&quot;</span></a>
<a class="sourceLine" id="cb4-3" title="3">table_NewYork   &lt;-<span class="st"> &quot;TESTING.DATASET3&quot;</span></a>
<a class="sourceLine" id="cb4-4" title="4">server.tables   &lt;-<span class="st"> </span><span class="kw">c</span>(table_Paris, table_Newcastle, table_NewYork)</a></code></pre></div>
<p><em>users id</em></p>
<p>The user id may be unique to each DataSHIELD server.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">user_Paris      &lt;-<span class="st">  &quot;administrator&quot;</span></a>
<a class="sourceLine" id="cb5-2" title="2">user_Newcastle  &lt;-<span class="st">  &quot;administrator&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3">user_NewYork    &lt;-<span class="st">  &quot;administrator&quot;</span></a>
<a class="sourceLine" id="cb5-4" title="4">server.users.id &lt;-<span class="st"> </span><span class="kw">c</span>(user_Paris, user_Newcastle, user_NewYork)</a></code></pre></div>
<p><em>users password</em></p>
<p>The password is likely to be unique for each DataSHIELD server. It should be provided by each organisation involved in giving access to the data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">password_Paris      &lt;-<span class="st">  &quot;datashield_test&amp;&quot;</span></a>
<a class="sourceLine" id="cb6-2" title="2">password_Newcastle  &lt;-<span class="st">  &quot;datashield_test&amp;&quot;</span></a>
<a class="sourceLine" id="cb6-3" title="3">password_NewYork    &lt;-<span class="st">  &quot;datashield_test&amp;&quot;</span></a>
<a class="sourceLine" id="cb6-4" title="4">server.users.pwd    &lt;-<span class="st">  </span><span class="kw">c</span>(password_Paris, password_Newcastle, password_NewYork)</a></code></pre></div>
<p><em>options ssl</em></p>
<p>The secure socket layer settings are likely to be unique for each DataSHIELD server. Each organisation should provide the details of these settings when it gives access to their DataSHIELD server(s).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">ssl_options_Paris     &lt;-<span class="st"> &quot;list(ssl_verifyhost=0,ssl_verifypeer=0)&quot;</span></a>
<a class="sourceLine" id="cb7-2" title="2">ssl_options_Newcastle &lt;-<span class="st"> &quot;list(ssl_verifyhost=0,ssl_verifypeer=0)&quot;</span></a>
<a class="sourceLine" id="cb7-3" title="3">ssl_options_NewYork   &lt;-<span class="st"> &quot;list(ssl_verifyhost=0,ssl_verifypeer=0)&quot;</span></a>
<a class="sourceLine" id="cb7-4" title="4">server.ssl.options    &lt;-<span class="st"> </span><span class="kw">c</span>(ssl_options_Paris,ssl_options_Newcastle,ssl_options_NewYork)</a></code></pre></div>
<p><em>driver connection</em></p>
<p>The driver is likely to be set to “OpalDriver”. This driver is used to connect to the Opal server.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">driver_Paris     &lt;-<span class="st"> &quot;OpalDriver&quot;</span></a>
<a class="sourceLine" id="cb8-2" title="2">driver_Newcastle &lt;-<span class="st"> &quot;OpalDriver&quot;</span></a>
<a class="sourceLine" id="cb8-3" title="3">driver_NewYork   &lt;-<span class="st"> &quot;OpalDriver&quot;</span></a>
<a class="sourceLine" id="cb8-4" title="4">server.drivers   &lt;-<span class="st"> </span><span class="kw">c</span>(driver_Paris,driver_Newcastle,driver_NewYork)</a></code></pre></div>
<p><em>building the login data frame</em></p>
<p>The function <em>ds.build.login.data.frame</em> generates a valid data frame. Any errors with the entries are pointed out, with a possible solution. In this example, we have printed the login data. It is a method of validating the information are correct, before logging in.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">login.data &lt;-<span class="st"> </span><span class="kw">ds.build.login.data.frame</span>(server.names,</a>
<a class="sourceLine" id="cb9-2" title="2">                                        server.urls,</a>
<a class="sourceLine" id="cb9-3" title="3">                                        server.tables,</a>
<a class="sourceLine" id="cb9-4" title="4">                                        server.users.id,</a>
<a class="sourceLine" id="cb9-5" title="5">                                        server.users.pwd,</a>
<a class="sourceLine" id="cb9-6" title="6">                                        server.ssl.options,</a>
<a class="sourceLine" id="cb9-7" title="7">                                        server.drivers)</a>
<a class="sourceLine" id="cb9-8" title="8"><span class="kw">print</span>(login.data)</a></code></pre></div>
<pre><code>     server                         url            table resource     driver
1     Paris https://192.168.56.100:8443 TESTING.DATASET1          OpalDriver
2 Newcastle https://192.168.56.100:8443 TESTING.DATASET2          OpalDriver
3  New York https://192.168.56.100:8443 TESTING.DATASET3          OpalDriver
           user         password token                                 options
1 administrator datashield_test&amp;       list(ssl_verifyhost=0,ssl_verifypeer=0)
2 administrator datashield_test&amp;       list(ssl_verifyhost=0,ssl_verifypeer=0)
3 administrator datashield_test&amp;       list(ssl_verifyhost=0,ssl_verifypeer=0)</code></pre>
</div>
<div id="logging-in-datashield-servers" class="section level1">
<h1>Logging in DataSHIELD servers</h1>
<p>Before DataSHIELD analysts can complete some calculations, it is required to log in to each DataSHIELD server. The function <em>ds.login</em> uses again the login data and the statistical variables made available through the datasets.</p>
<p>The example below uses again the login data obtained in the previous section. Then, the connections object is passed as an argument to obtain all the objects listed in each DataSHIELD server.</p>
<p>The connection does not need to be shown. However, some DataSHIELD analysts may like to verify they have successfully connected to each server.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">server.var &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&#39;ID&#39;</span>,<span class="st">&#39;CHARACTER&#39;</span>, <span class="st">&#39;LOGICAL&#39;</span>,<span class="st">&#39;NA_VALUES&#39;</span>,<span class="st">&#39;INTEGER&#39;</span>,<span class="st">&#39;NULL_VALUES&#39;</span>,</a>
<a class="sourceLine" id="cb11-2" title="2">                   <span class="st">&#39;NON_NEGATIVE_INTEGER&#39;</span>,<span class="st">&#39;POSITIVE_INTEGER&#39;</span>,<span class="st">&#39;NEGATIVE_INTEGER&#39;</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">                   <span class="st">&#39;NUMERIC&#39;</span>, <span class="st">&#39;NON_NEGATIVE_NUMERIC&#39;</span>,<span class="st">&#39;POSITIVE_NUMERIC&#39;</span>,<span class="st">&#39;NEGATIVE_NUMERIC&#39;</span>,</a>
<a class="sourceLine" id="cb11-4" title="4">                   <span class="st">&#39;FACTOR_CHARACTER&#39;</span>,<span class="st">&#39;FACTOR_INTEGER&#39;</span>,<span class="st">&#39;IDENTIFIER&#39;</span>,<span class="st">&#39;CATEGORY&#39;</span>,<span class="st">&#39;IDENTIFIER&#39;</span>,</a>
<a class="sourceLine" id="cb11-5" title="5">                   <span class="st">&#39;CATEGORY&#39;</span>)</a>
<a class="sourceLine" id="cb11-6" title="6">connections &lt;-<span class="st"> </span><span class="kw">ds.login</span>(login.data, <span class="dt">variables =</span> server.var, <span class="dt">symbol =</span> <span class="st">&#39;D&#39;</span>)</a>
<a class="sourceLine" id="cb11-7" title="7"><span class="kw">print</span>(connections)</a></code></pre></div>
<pre><code>$Paris
An object of class &quot;OpalConnection&quot;
Slot &quot;name&quot;:
[1] &quot;Paris&quot;

Slot &quot;opal&quot;:
url: https://192.168.56.100:8443 
name: Paris 
version: 3.0.3 
username: administrator 
rid: f64ff867-2b07-497e-8b3d-65105720187a 


$Newcastle
An object of class &quot;OpalConnection&quot;
Slot &quot;name&quot;:
[1] &quot;Newcastle&quot;

Slot &quot;opal&quot;:
url: https://192.168.56.100:8443 
name: Newcastle 
version: 3.0.3 
username: administrator 
rid: a8ff5c7d-8af3-433b-9a5c-c3a84edc31f2 


$`New York`
An object of class &quot;OpalConnection&quot;
Slot &quot;name&quot;:
[1] &quot;New York&quot;

Slot &quot;opal&quot;:
url: https://192.168.56.100:8443 
name: New York 
version: 3.0.3 
username: administrator 
rid: 0e3ab04c-7ae6-4f9e-a00c-70f136d78c03 </code></pre>
</div>
<div id="basic-server-level-analysis" class="section level1">
<h1>Basic server-level analysis</h1>
<p>The following code shows the names of the columns of the data.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">tables.colnames &lt;-<span class="st"> </span><span class="kw">ds.colnames</span>(<span class="dt">x =</span> <span class="st">&#39;D&#39;</span>, </a>
<a class="sourceLine" id="cb13-2" title="2">                               <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">print</span>(<span class="st">&quot;Columns names    : &quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Columns names    : &quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">print</span>(tables.colnames)</a></code></pre></div>
<pre><code>$Paris
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            

$Newcastle
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            

$`New York`
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            </code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">tables.features  &lt;-<span class="st"> </span><span class="kw">ds.dim</span>(<span class="dt">x =</span> <span class="st">&quot;D&quot;</span>, </a>
<a class="sourceLine" id="cb17-2" title="2">                           <span class="dt">type =</span> <span class="st">&quot;split&quot;</span>, </a>
<a class="sourceLine" id="cb17-3" title="3">                           <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">print</span>(<span class="st">&quot;Rows and columns : &quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Rows and columns : &quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">print</span>(tables.features)</a></code></pre></div>
<pre><code>$`dimensions of D in Paris`
[1] 71 16

$`dimensions of D in Newcastle`
[1] 71 16

$`dimensions of D in New York`
[1] 71 16</code></pre>
<p>The following code computes some basic statistical measures (i.e., centrality and spread).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">int.mean    &lt;-<span class="st"> </span><span class="kw">ds.mean</span> (<span class="dt">x =</span> <span class="st">&#39;D$POSITIVE_INTEGER&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;split&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb21-2" title="2">int.var     &lt;-<span class="st"> </span><span class="kw">ds.var</span> (<span class="dt">x =</span> <span class="st">&#39;D$POSITIVE_INTEGER&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;split&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb21-3" title="3">int.std     &lt;-<span class="st"> </span><span class="kw">sqrt</span>(int.var[[<span class="dv">1</span>]][,<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb21-4" title="4"></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="kw">print</span>(<span class="st">&quot;Mean&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Mean&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">print</span>(int.mean[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>          EstimatedMean Nmissing Nvalid Ntotal
Paris         5313.8451        0     71     71
Newcastle     5141.5915        0     71     71
New York       477.1549        0     71     71</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">print</span>(<span class="st">&quot;Standard deviation&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Standard deviation&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">print</span>(int.std)</a></code></pre></div>
<pre><code>    Paris Newcastle  New York 
 2863.716  3147.560   325.528 </code></pre>
</div>
<div id="basic-virtually-joined-analysis" class="section level1">
<h1>Basic virtually-joined analysis</h1>
<p>The following code shows the names of the columns of the data.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">tables.colnames &lt;-<span class="st"> </span><span class="kw">ds.colnames</span>(<span class="dt">x =</span> <span class="st">&#39;D&#39;</span>, </a>
<a class="sourceLine" id="cb29-2" title="2">                               <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb29-3" title="3"><span class="kw">print</span>(<span class="st">&quot;Columns names    : &quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Columns names    : &quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">print</span>(tables.colnames)</a></code></pre></div>
<pre><code>$Paris
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            

$Newcastle
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            

$`New York`
 [1] &quot;CHARACTER&quot;            &quot;LOGICAL&quot;              &quot;NA_VALUES&quot;           
 [4] &quot;INTEGER&quot;              &quot;NULL_VALUES&quot;          &quot;NON_NEGATIVE_INTEGER&quot;
 [7] &quot;POSITIVE_INTEGER&quot;     &quot;NEGATIVE_INTEGER&quot;     &quot;NUMERIC&quot;             
[10] &quot;NON_NEGATIVE_NUMERIC&quot; &quot;POSITIVE_NUMERIC&quot;     &quot;NEGATIVE_NUMERIC&quot;    
[13] &quot;FACTOR_CHARACTER&quot;     &quot;FACTOR_INTEGER&quot;       &quot;IDENTIFIER&quot;          
[16] &quot;CATEGORY&quot;            </code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">tables.features  &lt;-<span class="st"> </span><span class="kw">ds.dim</span>(<span class="dt">x =</span> <span class="st">&quot;D&quot;</span>, </a>
<a class="sourceLine" id="cb33-2" title="2">                           <span class="dt">type =</span> <span class="st">&quot;combined&quot;</span>, </a>
<a class="sourceLine" id="cb33-3" title="3">                           <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb33-4" title="4"><span class="kw">print</span>(<span class="st">&quot;Rows and columns : &quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Rows and columns : &quot;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">print</span>(tables.features)</a></code></pre></div>
<pre><code>$`dimensions of D in combined studies`
[1] 213  16</code></pre>
<p>The following code computes some basic statistical measures (i.e., centrality and spread).</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">int.mean    &lt;-<span class="st"> </span><span class="kw">ds.mean</span> (<span class="dt">x =</span> <span class="st">&#39;D$POSITIVE_INTEGER&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;combined&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb37-2" title="2">int.var     &lt;-<span class="st"> </span><span class="kw">ds.var</span> (<span class="dt">x =</span> <span class="st">&#39;D$POSITIVE_INTEGER&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;combined&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb37-3" title="3">int.std     &lt;-<span class="st"> </span><span class="kw">sqrt</span>(int.var[[<span class="dv">1</span>]][,<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb37-4" title="4"></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="kw">print</span>(<span class="st">&quot;Mean&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Mean&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">print</span>(int.mean[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>                EstimatedMean Nmissing Nvalid Ntotal
studiesCombined      3644.197        0    213    213</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">print</span>(<span class="st">&quot;Standard deviation&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Standard deviation&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">print</span>(int.std)</a></code></pre></div>
<pre><code>[1] 3325.32</code></pre>
</div>
<div id="assigning-values-to-some-server-variables" class="section level1">
<h1>Assigning values to some server variables</h1>
<p>The function <em>ds.assign_value</em> enforces a valid R data type being attached to any server variable. No variable is created locally, instead the variable is created and stored on the server. The function also returns an indication of whether the assignment process has been achieved on all servers. It is a useful function to use in DataSHIELD scripts to create a variable and verify it has been created on the server. When developing client-side functions, this function can assist with writing succinct code. The developer can be verified the variable has been created with the correct data type.</p>
<p>In the example below, the <em>server-side function rUnifDs</em> generates uniform distributions and returns a <em>numeric</em> values vector matching the arguments. The returned distribution is saved on the server against a variable named <em>rUnifDist</em>. A data type must match the server-side function outcome. In this case, it is set to <em>numeric</em>, then the outcome is TRUE. Otherwise, no variable is created.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="co">#server function header </span></a>
<a class="sourceLine" id="cb45-2" title="2">server.function.call &lt;-<span class="st"> </span><span class="kw">call</span>(<span class="st">&quot;rUnifDS&quot;</span>, <span class="dv">100</span>, <span class="dv">14</span>, <span class="dv">50</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb45-3" title="3">var.created &lt;-<span class="st"> </span><span class="kw">ds.assign.value</span>(<span class="dt">new.variable.name =</span> <span class="st">&quot;rUnifDist&quot;</span>,</a>
<a class="sourceLine" id="cb45-4" title="4">                               <span class="dt">value =</span> server.function.call,</a>
<a class="sourceLine" id="cb45-5" title="5">                               <span class="dt">class.type =</span> <span class="st">&quot;numeric&quot;</span>,</a>
<a class="sourceLine" id="cb45-6" title="6">                               <span class="dt">asynchronous =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb45-7" title="7">                               <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb45-8" title="8"><span class="kw">print</span>(var.created)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">print</span>(<span class="kw">ds.class</span>(<span class="dt">x =</span> <span class="st">&quot;rUnifDist&quot;</span>, <span class="dt">datasources =</span> connections))</a></code></pre></div>
<pre><code>$Paris
[1] &quot;numeric&quot;

$Newcastle
[1] &quot;numeric&quot;

$`New York`
[1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">var.created &lt;-<span class="st"> </span><span class="kw">ds.assign.value</span>(<span class="dt">new.variable.name =</span><span class="st">&quot;rUnifDistB&quot;</span>,</a>
<a class="sourceLine" id="cb49-2" title="2">                               <span class="dt">value =</span> server.function.call,</a>
<a class="sourceLine" id="cb49-3" title="3">                               <span class="dt">class.type =</span> <span class="st">&quot;character&quot;</span>,</a>
<a class="sourceLine" id="cb49-4" title="4">                               <span class="dt">asynchronous =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb49-5" title="5">                               <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb49-6" title="6"><span class="kw">print</span>(var.created)</a></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">print</span>(<span class="kw">ds.class</span>(<span class="dt">x =</span> <span class="st">&quot;rUnifDistB&quot;</span>, <span class="dt">datasources =</span> connections))</a></code></pre></div>
<pre><code>$Paris
[1] &quot;numeric&quot;

$Newcastle
[1] &quot;numeric&quot;

$`New York`
[1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">runif.mean    &lt;-<span class="st"> </span><span class="kw">ds.mean</span> (<span class="dt">x =</span> <span class="st">&#39;rUnifDist&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;split&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb53-2" title="2">runif.var     &lt;-<span class="st"> </span><span class="kw">ds.var</span> (<span class="dt">x =</span> <span class="st">&#39;rUnifDist&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;split&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb53-3" title="3">runif.std     &lt;-<span class="st"> </span><span class="kw">sqrt</span>(runif.var[[<span class="dv">1</span>]][,<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb53-4" title="4"></a>
<a class="sourceLine" id="cb53-5" title="5"><span class="kw">print</span>(<span class="st">&quot;server-level&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;server-level&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="kw">print</span>(<span class="st">&quot;Mean&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Mean&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">print</span>(runif.mean[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>          EstimatedMean Nmissing Nvalid Ntotal
Paris          31.58862        0    100    100
Newcastle      32.98437        0    100    100
New York       33.32203        0    100    100</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">print</span>(<span class="st">&quot;Standard deviation&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Standard deviation&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1"><span class="kw">print</span>(runif.std)</a></code></pre></div>
<pre><code>    Paris Newcastle  New York 
 10.26680  10.90146   9.96010 </code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">print</span>(<span class="st">&quot;virtually-joined&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;virtually-joined&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">runif.mean    &lt;-<span class="st"> </span><span class="kw">ds.mean</span> (<span class="dt">x =</span> <span class="st">&#39;rUnifDist&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;combined&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb65-2" title="2">runif.var     &lt;-<span class="st"> </span><span class="kw">ds.var</span> (<span class="dt">x =</span> <span class="st">&#39;rUnifDist&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;combined&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb65-3" title="3">runif.std     &lt;-<span class="st"> </span><span class="kw">sqrt</span>(runif.var[[<span class="dv">1</span>]][,<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb65-4" title="4"></a>
<a class="sourceLine" id="cb65-5" title="5"><span class="kw">print</span>(<span class="st">&quot;Mean&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Mean&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="kw">print</span>(runif.mean[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>                EstimatedMean Nmissing Nvalid Ntotal
studiesCombined      32.63167        0    300    300</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">print</span>(<span class="st">&quot;Standard deviation&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Standard deviation&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">print</span>(runif.std)</a></code></pre></div>
<pre><code>[1] 10.37599</code></pre>
</div>
<div id="checking-some-server-side-variables-exists" class="section level1">
<h1>Checking some server side variables exists</h1>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1"><span class="kw">print</span>(<span class="st">&quot;the variable has been created and should exists on the server. A correct answer should be TRUE&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;the variable has been created and should exists on the server. A correct answer should be TRUE&quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1">rUnif.exists &lt;-<span class="st"> </span><span class="kw">ds.exists.on.server</span>(<span class="dt">variable.name =</span> <span class="st">&quot;rUnifDist&quot;</span>, </a>
<a class="sourceLine" id="cb75-2" title="2">                                    <span class="dt">class.type    =</span> <span class="st">&quot;numeric&quot;</span>,</a>
<a class="sourceLine" id="cb75-3" title="3">                                    <span class="dt">datasources   =</span> connections)</a>
<a class="sourceLine" id="cb75-4" title="4"><span class="kw">print</span>(rUnif.exists)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1"><span class="kw">print</span>(<span class="st">&quot;the variable has not been created and should exists on the server. A correct answer should be FALSE&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;the variable has not been created and should exists on the server. A correct answer should be FALSE&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1">rUnif.exists &lt;-<span class="st"> </span><span class="kw">ds.exists.on.server</span>(<span class="dt">variable.name =</span> <span class="st">&quot;rUnifDistB&quot;</span>, </a>
<a class="sourceLine" id="cb79-2" title="2">                                    <span class="dt">class.type    =</span> <span class="st">&quot;character&quot;</span>,</a>
<a class="sourceLine" id="cb79-3" title="3">                                    <span class="dt">datasources   =</span> connections)</a>
<a class="sourceLine" id="cb79-4" title="4"><span class="kw">print</span>(rUnif.exists)</a></code></pre></div>
<pre><code>[1] FALSE</code></pre>
</div>
<div id="deleting-some-server-side-variables" class="section level1">
<h1>Deleting some server-side variables</h1>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">outcome &lt;-<span class="st"> </span><span class="kw">ds.remove.variable</span>(<span class="dt">variable.name =</span> <span class="st">&quot;rUnifDist&quot;</span>, <span class="dt">class.type =</span> <span class="st">&quot;numeric&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb81-2" title="2"><span class="kw">print</span>(outcome)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">outcome &lt;-<span class="st"> </span><span class="kw">ds.remove.variable</span>(<span class="dt">variable.name =</span> <span class="st">&quot;rUnifDistB&quot;</span>, <span class="dt">class.type =</span> <span class="st">&quot;character&quot;</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb83-2" title="2"><span class="kw">print</span>(outcome)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="calling-an-aggregate-server-side-function" class="section level1">
<h1>Calling an aggregate server-side function</h1>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1">server.function.call &lt;-<span class="st"> </span><span class="kw">call</span>(<span class="st">&quot;varDS&quot;</span>,<span class="st">&quot;D$POSITIVE_INTEGER&quot;</span>)</a>
<a class="sourceLine" id="cb85-2" title="2"><span class="kw">print</span>(server.function.call)</a></code></pre></div>
<pre><code>varDS(&quot;D$POSITIVE_INTEGER&quot;)</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1">outcome &lt;-<span class="st"> </span><span class="kw">ds.aggregate</span>(<span class="dt">expression =</span> server.function.call, <span class="dt">asynchronous =</span> <span class="ot">FALSE</span>, <span class="dt">datasources =</span> connections)</a>
<a class="sourceLine" id="cb87-2" title="2"><span class="kw">print</span>(outcome)</a></code></pre></div>
<pre><code>[1] &quot;NR&quot;</code></pre>
</div>
<div id="logging-out-of-datashield-servers" class="section level1">
<h1>Logging out of DataSHIELD servers</h1>
<p>At the end of each DataSHIELD script, the connections between the client and the DataSHIELD servers must be closed. Otherwise, the performance of each server is negatively affected. So, once a DataSHIELD user does not require any more the computing resources of any DataSHIELD server, they log out.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1">outcome &lt;-<span class="st"> </span><span class="kw">ds.logout</span>(connections)</a>
<a class="sourceLine" id="cb89-2" title="2"><span class="kw">print</span>(outcome)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
